{% extends "homeparent.html" %}

{% block styles %}
body {
  background-color: #f9f9f9;
  font-family: Arial, sans-serif;
}

.history-container {
  margin: 20px auto;
  max-width: 800px;
  background-color: #fff;
  border: 1px solid #ddd;
  padding: 20px;
  border-radius: 5px;
}

.history-section {
  margin-bottom: 30px;
}

.history-section h3 {
  margin-bottom: 10px;
  color: #333;
}

.history-table {
  width: 100%;
  border-collapse: collapse;
}

.history-table th,
.history-table td {
  padding: 10px;
  border: 1px solid #ccc;
  text-align: left;
}

.history-table th {
  background-color: #f0f0f0;
}
{% endblock %}

{% block content %}
<div class="history-container">
  <h2>Your Job History</h2>
  
  <div class="history-section">
    <h3>Jobs Created</h3>
    {% if created_jobs|length > 0 %}
      <table class="history-table">
        <tr>
          <th>Job Title</th>
          <th>Description</th>
          <th>Status</th>
        </tr>
        {% for job in created_jobs %}
        <tr>
          <td>{{ job.title }}</td>
          <td>{{ job.description }}</td>
          <td>
            {% if job.taken %}
              {% if job.is_complete %}
                Completed
              {% else %}
                Taken
              {% endif %}
            {% else %}
              Open
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>You have not created any jobs.</p>
    {% endif %}
  </div>
  
  <div class="history-section">
    <h3>Jobs Taken</h3>
    {% if taken_jobs|length > 0 %}
      <table class="history-table">
        <tr>
          <th>Job Title</th>
          <th>Description</th>
          <th>Status</th>
        </tr>
        {% for job in taken_jobs %}
        <tr>
          <td>{{ job.title }}</td>
          <td>{{ job.description }}</td>
          <td>
            {% if job.is_complete %}
              Completed
            {% else %}
              In Progress
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>You have not taken any jobs.</p>
    {% endif %}
  </div>
  
  <div class="history-section">
    <h3>Jobs Completed</h3>
    {% if completed_jobs|length > 0 %}
      <table class="history-table">
        <tr>
          <th>Job Title</th>
          <th>Description</th>
          <th>Your Role</th>
        </tr>
        {% for job in completed_jobs %}
        <tr>
          <td>{{ job.title }}</td>
          <td>{{ job.description }}</td>
          <td>
            {% if job.user_id == g.user.id %}
              Creator
            {% else %}
              Taker
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>No completed jobs recorded.</p>
    {% endif %}
  </div>
</div>
{% endblock %}
