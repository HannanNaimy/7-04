{% extends "homeparent.html" %}

{% block content %}
<div class="job-details-container">
  <header class="job-header">
    <span class="label-looking-for">Looking For&gt;</span>
    <h1 class="job-title">{{ job.title }}</h1>
  </header>

  <section class="job-content">
    <p class="job-description">{{ job.description }}</p>
  </section>
  
  <footer class="job-footer">
    <p class="job-commission">
        Commission: RM{{ job.commission }}
    </p>

      <p class="confirmation-status">
         Confirmation: {{ job.creator_confirmed|int + job.taker_confirmed|int }}/2
      </p>
      <!-- Only creators and takers should be able to submit a confirmation -->
      <form action="{{ url_for('jobStatus', job_id=job.id) }}" method="POST">
        {% if (g.user.id == job.user_id and job.creator_confirmed) or (g.user.id == job.taken_by and job.taker_confirmed) %}
          <button class="job-take-button" type="submit" disabled>Already Confirmed</button>
        {% else %}
          <button class="job-take-button" type="submit">Confirm Completion</button>
        {% endif %}
      </form>
  </footer>
</div>
{% endblock %}
